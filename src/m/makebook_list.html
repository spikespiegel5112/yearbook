<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" id="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<!-- build:css ../css/m.all.min.css -->
	<link rel="stylesheet" type="text/css" href="../css/m_reset.css">
	<link rel="stylesheet" type="text/css" href="../css/m_common.css">
	<link rel="stylesheet" type="text/css" href="../css/m_makebook.css">
	<!-- endbuild -->
	<link rel="stylesheet" href="http://at.alicdn.com/t/font_1464126730_9261143.css">
	<link rel="stylesheet" href="../assets/css/font-awesome.css">
    <link rel="stylesheet" href="../assets/css/swiper.min.css" type="text/css" media="all"/>
	<title>3.12 制作书册-列表</title>
</head>

<body class="bg_f6f6f6">
	<div class='main_conatainer has_footer_nav'>
        <div class="ybwechatheader_wrapper">
            <a class='left_btn back_btn' href='javascript:;'>
                <span class="ybiconfont ybicon-backward3"></span>
            </a>
            <p>时光不老我们不散</p>
            <div class="filter_order right_btn">
                <a class="search_status" href="javascript:;">全部页<i class="icon-caret-down"></i></a>
                <ul>
                    <li><a href="javascript:;">全部页</a></li>
                    <li><a href="javascript:;">未编辑页</a></li>
                    <li><a href="javascript:;">照片缺失页</a></li>
                    <li><a href="javascript:;">文字缺失页</a></li>
                </ul>
            </div>
        </div>
        <div class="make_book_wrap">
            <div class="list_mode">
                <ul>
                    <li class="page_wrap">
                        <div class="page">
                            <div class="page_num">封底-封面</div>
                            <img src="../img/m/default/makebook01.jpg">
                            <a class="delete" href="javascript:;">×</a>
                            <a class="change" href="javascript:;"><i class="ybiconfont ybicon-pencil"></i>更换</a>
                        </div>
                    </li>
                    <li class="page_wrap cover"><!--封面class:cover-->
                        <div class="page">
                            <div class="page_num">封底-封面</div>
                            <img src="../img/m/default/makebook02.jpg">
                            <a class="delete" href="javascript:;">×</a>
                            <a class="change" href="javascript:;"><i class="ybiconfont ybicon-pencil"></i>更换</a>
                        </div>
                    </li>
                    <li class="page_wrap">
                        <div class="page">
                            <div class="page_num">P1-P2</div>
                            <img src="../img/m/default/makebook03.jpg">
                            <a class="delete" href="javascript:;">×</a>
                            <a class="change" href="javascript:;"><i class="ybiconfont ybicon-pencil"></i>更换</a>
                        </div>
                    </li>
                    <li class="page_wrap">
                        <div class="page">
                            <div class="page_num">P1-P2</div>
                            <img src="../img/m/default/makebook04.jpg">
                            <a class="delete" href="javascript:;">×</a>
                            <a class="change" href="javascript:;"><i class="ybiconfont ybicon-pencil"></i>更换</a>
                        </div>
                    </li>
                    <li class="page_wrap">
                        <div class="page">
                            <div class="page_num">P3-P4</div>
                            <img src="../img/m/default/makebook05.jpg">
                            <a class="delete" href="javascript:;">×</a>
                            <a class="change" href="javascript:;"><i class="ybiconfont ybicon-pencil"></i>更换</a>
                        </div>
                    </li>
                    <li class="page_wrap">
                        <div class="page">
                            <div class="page_num">P3-P4</div>
                            <img src="../img/m/default/makebook06.jpg">
                            <a class="delete" href="javascript:;">×</a>
                            <a class="change" href="javascript:;"><i class="ybiconfont ybicon-pencil"></i>更换</a>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="btn_group">
                <a class="add_page" href="javascript:;">添加页面</a>
                <a class="print" href="javascript:;">立即印刷</a>
            </div>
        </div>
	</div>

    <!--修改配置 （同确定单配置）4.14废弃-->
    <!--<div class="add_order_container">
        <div class="new_order_wrap">
            <div class="order_info">
                <div class="ot">
                    <div class="name">照片书：《<span>时光不老我们不散</span>》</div>
                    <b class="sumprice">￥64.00</b>
                </div>
                <div class="om">
                    <div class="cover">
                        <div class="book">
                            <img src="../img/m/default/grow_up_healthy.jpg">
                        </div>
                        <div class="page_num">20P/36张入册</div>
                    </div>
                    <div class="bd_wrap">
                        <div class="style size">
                            <label>尺寸选择</label>

                            <div class="item selected">
                                <span>气派大装(175mm×148mm)</span>
                                <i class="ybiconfont ybicon-ok"></i>
                            </div>
                            <div class="item">
                                <span>别致小装(145mm×210mm)</span>
                                <i class="ybiconfont ybicon-ok"></i>
                            </div>
                        </div>
                        <div class="style binding">
                            <label>装订选择</label>

                            <div class="item selected">
                                <span>蝴蝶装（硬）</span>
                                <i class="ybiconfont ybicon-ok"></i>
                            </div>
                            <div class="item">
                                <span>精装（硬）</span>
                                <i class="ybiconfont ybicon-ok"></i>
                            </div>
                            <div class="item">
                                <span>平装（软）</span>
                                <i class="ybiconfont ybicon-ok"></i>
                            </div>
                        </div>
                        <div class='ybcommon_counter_item'>
                            <a href="javascript:;">-</a>
                            <input type='text' value='0'>
                            <a href="javascript:;">+</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="om_btn_wrap">
                <a class="om_btn" href="javascript:;">确认修改</a>
            </div>
        </div>
    </div>-->
    <!--添加页面-->
    <div class="add_page_container">
        <div class="add_page">
            <label>请输入您想要添加的页面数量：</label>
            <div class='ybcommon_counter_item'>
                <a href="javascript:;">-</a>
                <input type='text' value='0'>
                <a href="javascript:;">+</a>
            </div>
            <div class="om_btn_wrap">
                <a class="om_btn" href="javascript:;">确认修改</a>
            </div>
        </div>
    </div>
    <!--更换模板 （同确认配置中添加页面）-->
    <div class="add_book_container">
        <div class="finished_book_wrap">
            <h4>请选择您想要使用的模板</h4>

            <div class="book_list swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <a class='bookcover selected' href="javascript:;">
                            <img src="../img/m/default/grow_up_healthy.jpg">
                            <span class="ybiconfont ybicon-ok"></span>
                        </a>
                        <h5 class='name'>《越单纯越幸福》</h5>
                    </div>
                    <div class="swiper-slide">
                        <a class='bookcover' href="javascript:;">
                            <img src="../img/m/default/grow_up_healthy.jpg">
                            <span class="ybiconfont ybicon-ok"></span>
                        </a>
                        <h5 class='name'>《越单纯越幸福》</h5>
                    </div>
                    <div class="swiper-slide">
                        <a class='bookcover' href="javascript:;">
                            <img src="../img/m/default/grow_up_healthy.jpg">
                            <span class="ybiconfont ybicon-ok"></span>
                        </a>
                        <h5 class='name'>《越单纯越幸福》</h5>
                    </div>
                    <div class="swiper-slide">
                        <a class='bookcover' href="javascript:;">
                            <img src="../img/m/default/grow_up_healthy.jpg">
                            <span class="ybiconfont ybicon-ok"></span>
                        </a>
                        <h5 class='name'>《越单纯越幸福》</h5>
                    </div>
                    <div class="swiper-slide">
                        <a class='bookcover' href="javascript:;">
                            <img src="../img/m/default/grow_up_healthy.jpg">
                            <span class="ybiconfont ybicon-ok"></span>
                        </a>
                        <h5 class='name'>《越单纯越幸福》</h5>
                    </div>
                </div>
            </div>
            <div class="om_btn_wrap">
                <a class="om_btn" href="javascript:;">确认更换</a>
            </div>
        </div>
    </div>
    <!--删除页面 提示-->
    <div class="delete_page_tips">
        <div class="tips">
            <h2>注意！</h2>
            <p>您已经上传本页3张照片，这一删<br>可就挽回不了了啊，慎重啊~</p>
            <div class="btn_group">
                <a class="cancel" href="javascript:;">算了，我手抖</a>
                <a class="ok" href="javascript:;">废话，删掉</a>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="../assets/js/jquery.min.js"></script>
<script type="text/javascript" src="../assets/js/swiper.jquery.min.js"></script>
<script type="text/javascript" src="../js/m_base.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $.remResizing();
        $('.ybcommon_counter_item').priceCalculator({});
        //makeBookChangeConfig();
        makeBookDeletePage();
        makeBookChangeTpl();
        makeBookAddPage();
        filterStatus();
    });

    function makeBookChangeConfig(){
        $('.change_config').on('click',function(){
            var configContainer = $('.add_order_container');
            configContainer.fadeIn('fast');

            //点击遮罩区域关闭
            configContainer.on('click', function (e) {
                if ($(e.target).closest('.new_order_wrap').length == 0) {
                    configContainer.fadeOut('fast');
                }
            });

            //选择尺寸、装订方式
            $('.style .item').on('touchend', function () {
                $(this).siblings().removeClass('selected');
                $(this).addClass('selected');
            });

            //确定添加、修改后关闭
            $('.new_order_wrap .om_btn').on('touchend', function () {
                configContainer.fadeOut('fast');
            });
        })
    }

    function makeBookDeletePage(){
        $('.page .delete').on('click',function(){
            var $this = $(this);
            var tipsContainer = $('.delete_page_tips');
            tipsContainer.fadeIn('fast');

            //点击遮罩区域关闭
            tipsContainer.on('click', function (e) {
                if ($(e.target).closest('.tips').length == 0) {
                    tipsContainer.fadeOut('fast');
                }
            });

            //取消关闭提示
            tipsContainer.find('.cancel').on('touchend', function (e) {
                tipsContainer.fadeOut('fast');
            });

            //确定删除 关闭
            tipsContainer.find('.ok').on('touchend', function (e) {
                tipsContainer.fadeOut('fast');
            });
        });
    }

    //更换模板
    function makeBookChangeTpl() {
        //添加已完成书册是订单
        $('.page .change').on('click', function (e) {
            var bookContainer = $('.add_book_container');
            bookContainer.fadeIn('fast');

            //点击遮罩区域关闭
            bookContainer.on('click', function (e) {
                if ($(e.target).closest('.finished_book_wrap').length == 0) {
                    bookContainer.fadeOut('fast');
                }
            });

            //已完成书册列表滑动
            var swiper = new Swiper('.finished_book_wrap .swiper-container', {
                slidesPerView: 'auto'
            });

            //选择要添加的书册
            $('.book_list div .bookcover').click(function () {
                $('.book_list div .bookcover').each(function () {
                    $(this).removeClass('selected');
                });
                $(this).addClass('selected');
            });

            //确定选择关闭
            $('.finished_book_wrap .om_btn').on('touchend', function () {
                bookContainer.fadeOut('fast');
            });
        });
    }

    //添加页面
    function makeBookAddPage(){
        $('.make_book_wrap .add_page').click(function(){
            var addPageCon = $('.add_page_container');
            addPageCon.fadeIn('fast');

            //点击遮罩区域关闭
            addPageCon.on('click', function (e) {
                if ($(e.target).closest('.add_page').length == 0) {
                    addPageCon.fadeOut('fast');
                }
            });

            //确定添加关闭
            $('.add_page .om_btn').on('touchend', function () {
                addPageCon.fadeOut('fast');
            });
        })
    }

    /*
     * 筛选
     * */
    function filterStatus(){
        $('.search_status').on('touchend',function(e){
            var $this = $(this);
            if($this.next().is(':visible')){
                $this.next().hide();
                $this.find('i').removeClass('icon-caret-up').addClass('icon-caret-down');
            }else{
                $this.next().show()
                $this.find('i').removeClass('icon-caret-down').addClass('icon-caret-up');
            }

            $(document).one('touchend',function(){
                $('.filter_order ul').hide();
            });
            e.stopPropagation();
        });
        $('.filter_order ul li a').on('touchend',function(){
            $('.search_status').html($(this).html()+'<i class="icon-caret-down"></i>');
            $(this).closest('ul').hide();
        });
    }
</script>
</html>