<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" id="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<!-- build:css ../css/m.all.min.css -->
	<link rel="stylesheet" type="text/css" href="../css/m_reset.css">
	<link rel="stylesheet" type="text/css" href="../css/m_common.css">
	<link rel="stylesheet" type="text/css" href="../css/m_makebook.css">
	<!-- endbuild -->
	<link rel="stylesheet" href="http://at.alicdn.com/t/font_1459505971_796465.css">
	<link rel="stylesheet" href="../assets/css/swiper.min.css">
	<title>3.12 制作书册-单页编辑</title>
</head>

<body>
	<div class='main_conatainer edit_book_con'><!--单页书册编辑class:edit_book-->
        <div class="ybwechatheader_wrapper">
            <a class='left_btn left_angle' href='javascript:;'>
                <span class="ybiconfont ybicon-backward3"></span>
            </a>
            <p>《<span>时光不老我们不散</span>》<span>P1-P2</span></p>
            <a class="right_btn print" href="javascript:;">打印</a>
        </div>
        <div class="make_book_wrap">
            <div class="single_mode">
                <ul class="swiper-wrapper">
                    <li class="swiper-slide">
                        <div class="tpl double">
                            <div class="double_con">
                                <div class="page left">
                                    <link href="http://yb-test-book.qiniudn.com/pageTpl/IMAGE_TEXT/37/css/small_left.css" rel="stylesheet" type="text/css">
                                    <div class="container_activity_37_small_left">
                                        <div class="page_header_container">
                                            <div slottype="article" class="warp1">
                                                <div class="richShow" slottype="articleShow" textheight="40">
                                                    <div class="main_title" slottype="richText" slotnum="0">
                                                        雄关为头越
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="photo0_container">
                                            <span id="imgMask0" imgwidth="1324" imgheight="907" slotnum="0" slottype="mask" class="photoframe_common_property photoframe0"></span>
                                            <img slottype="img" slotnum="0" class="img0" src="">
                                        </div>
                                        <div class="photo1_container">
                                            <span id="imgMask1" imgwidth="498" imgheight="334" slotnum="1" slottype="mask" class="photoframe_common_property photoframe1"></span>
                                            <img slottype="img" slotnum="1" class="img1" src="">
                                        </div>
                                        <div class="photo2_container">
                                            <span id="imgMask2" imgwidth="389" imgheight="261" slotnum="2" slottype="mask" class="photoframe_common_property photoframe2"></span>
                                            <img slottype="img" slotnum="2" class="img2" src="">
                                        </div>
                                        <div class="content_container">
                                            <strong>
                                                <div slottype="article" class="warp2">
                                                    <div class="richShow" slottype="articleShow" textheight="30">
                                                        <p></p>
                                                        <p slottype="richText" slotnum="2" style="min-height:30px;" placeholder="活动标题" mode="inline"></p>
                                                        <p></p>
                                                    </div>
                                                </div>
                                            </strong>

                                            <div slottype="article" class="warp3">
                                                <div class="richShow" slottype="articleShow" textheight="96">
                                                    <p slottype="richText" slotnum="3" style="display:block;word-wrap:break-word;" placeholder="活动内容"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="page right">
                                    <link href="http://yb-test-book.qiniudn.com/pageTpl/PANO/2/css/small_left.css" rel="stylesheet" type="text/css">
                                    <div class="container_panoramic_02_small_left">
                                        <div slottype="article" class="warp">
                                            <div slottype="articleShow" textheight="62" class="richShow">
                                                <p placeholder="学校班级.." slottype="richText" slotnum="4" mode="inline" class="graduate-po">
                                                </p>
                                            </div>
                                        </div>
                                        <span id="imgMask1" imgwidth="3120" imgheight="1700" slotnum="1" slottype="mask" class="photoframe1" style="text-align:center;vertical-align:middle;display: block;"></span>
                                        <img slottype="img" slotnum="1" src="" class="img1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="tpl double">
                            <div class="double_con">
                                <div class="page left">
                                    <link href="http://yb-test-book.qiniudn.com/pageTpl/IMAGE_TEXT/37/css/small_left.css" rel="stylesheet" type="text/css">
                                    <div class="container_activity_37_small_left">
                                        <div class="page_header_container">
                                            <div slottype="article" class="warp1">
                                                <div class="richShow" slottype="articleShow" textheight="40">
                                                    <div class="main_title" slottype="richText" slotnum="0">
                                                        雄关为头越
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="photo0_container">
                                            <span id="imgMask0" imgwidth="1324" imgheight="907" slotnum="0" slottype="mask" class="photoframe_common_property photoframe0"></span>
                                            <img slottype="img" slotnum="0" class="img0" src="">
                                        </div>
                                        <div class="photo1_container">
                                            <span id="imgMask1" imgwidth="498" imgheight="334" slotnum="1" slottype="mask" class="photoframe_common_property photoframe1"></span>
                                            <img slottype="img" slotnum="1" class="img1" src="">
                                        </div>
                                        <div class="photo2_container">
                                            <span id="imgMask2" imgwidth="389" imgheight="261" slotnum="2" slottype="mask" class="photoframe_common_property photoframe2"></span>
                                            <img slottype="img" slotnum="2" class="img2" src="">
                                        </div>
                                        <div class="content_container">
                                            <strong>
                                                <div slottype="article" class="warp2">
                                                    <div class="richShow" slottype="articleShow" textheight="30">
                                                        <p></p>
                                                        <p slottype="richText" slotnum="2" style="min-height:30px;" placeholder="活动标题" mode="inline"></p>
                                                        <p></p>
                                                    </div>
                                                </div>
                                            </strong>

                                            <div slottype="article" class="warp3">
                                                <div class="richShow" slottype="articleShow" textheight="96">
                                                    <p slottype="richText" slotnum="3" style="display:block;word-wrap:break-word;" placeholder="活动内容"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="page right">
                                    <link href="http://yb-test-book.qiniudn.com/pageTpl/PANO/2/css/small_left.css" rel="stylesheet" type="text/css">
                                    <div class="container_panoramic_02_small_left">
                                        <div slottype="article" class="warp">
                                            <div slottype="articleShow" textheight="62" class="richShow">
                                                <p placeholder="学校班级.." slottype="richText" slotnum="4" mode="inline" class="graduate-po">
                                                </p>
                                            </div>
                                        </div>
                                        <span id="imgMask1" imgwidth="3120" imgheight="1700" slotnum="1" slottype="mask" class="photoframe1" style="text-align:center;vertical-align:middle;display: block;"></span>
                                        <img slottype="img" slotnum="1" src="" class="img1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="swiper-slide">
                        <div class="tpl double">
                            <div class="double_con">
                                <div class="page left">
                                    <link href="http://yb-test-book.qiniudn.com/pageTpl/IMAGE_TEXT/37/css/small_left.css" rel="stylesheet" type="text/css">
                                    <div class="container_activity_37_small_left">
                                        <div class="page_header_container">
                                            <div slottype="article" class="warp1">
                                                <div class="richShow" slottype="articleShow" textheight="40">
                                                    <div class="main_title" slottype="richText" slotnum="0">
                                                        雄关为头越
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="photo0_container">
                                            <span id="imgMask0" imgwidth="1324" imgheight="907" slotnum="0" slottype="mask" class="photoframe_common_property photoframe0"></span>
                                            <img slottype="img" slotnum="0" class="img0" src="">
                                        </div>
                                        <div class="photo1_container">
                                            <span id="imgMask1" imgwidth="498" imgheight="334" slotnum="1" slottype="mask" class="photoframe_common_property photoframe1"></span>
                                            <img slottype="img" slotnum="1" class="img1" src="">
                                        </div>
                                        <div class="photo2_container">
                                            <span id="imgMask2" imgwidth="389" imgheight="261" slotnum="2" slottype="mask" class="photoframe_common_property photoframe2"></span>
                                            <img slottype="img" slotnum="2" class="img2" src="">
                                        </div>
                                        <div class="content_container">
                                            <strong>
                                                <div slottype="article" class="warp2">
                                                    <div class="richShow" slottype="articleShow" textheight="30">
                                                        <p></p>
                                                        <p slottype="richText" slotnum="2" style="min-height:30px;" placeholder="活动标题" mode="inline"></p>
                                                        <p></p>
                                                    </div>
                                                </div>
                                            </strong>

                                            <div slottype="article" class="warp3">
                                                <div class="richShow" slottype="articleShow" textheight="96">
                                                    <p slottype="richText" slotnum="3" style="display:block;word-wrap:break-word;" placeholder="活动内容"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="page right">
                                    <link href="http://yb-test-book.qiniudn.com/pageTpl/PANO/2/css/small_left.css" rel="stylesheet" type="text/css">
                                    <div class="container_panoramic_02_small_left">
                                        <div slottype="article" class="warp">
                                            <div slottype="articleShow" textheight="62" class="richShow">
                                                <p placeholder="学校班级.." slottype="richText" slotnum="4" mode="inline" class="graduate-po">
                                                </p>
                                            </div>
                                        </div>
                                        <span id="imgMask1" imgwidth="3120" imgheight="1700" slotnum="1" slottype="mask" class="photoframe1" style="text-align:center;vertical-align:middle;display: block;"></span>
                                        <img slottype="img" slotnum="1" src="" class="img1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>
        </div>
	</div>
</body>
<script type="text/javascript" src="../assets/js/jquery.min.js"></script>
<script type="text/javascript" src="../assets/js/swiper.jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        remResizing();
    });
    var swiper = new Swiper('.single_mode', {
        loop:false,
        // 如果需要前进后退按钮
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
    });
    var remResizing=function(options) {
        options = $.extend({
            fontsize: 16,
            minwidth: 320,
            maxwidth: 0,
            aligncenter: true
        }, options);
        var htmlEl = $('html'),
                bodyEl = $('body'),
                windowWidth = $(window).width();
        sizeConstraint();
        $(window).resize(function() {
            sizeConstraint();
        });

        function sizeConstraint() {
            var windowWidth = $(window).width(),
                    windowHeight = $(window).height(),
                    factor = 0;

            // alert(windowWidth)
            if (options.minwidth == 0) {
                //alert('当最小宽度等于0时')
                bodyEl.css({
                    'width': windowWidth
                });
                factor = windowWidth / options.minwidth;
            } else if (options.minwidth != 0 && windowWidth <= options.minwidth) {
                //alert('当最小宽度不等于0且屏幕宽度小于等最小宽度时')
                bodyEl.css({
                    'width': options.minwidth
                });
                factor = 1;
            } else if (options.maxwidth == 0 || windowWidth > options.minwidth && windowWidth <= options.maxwidth) {
                //alert('当屏幕宽度大于最小宽度且小于最大宽度，或没有最大宽度时')
                orientationSensor({
                    portrait: function() {
                        bodyEl.css({
                            'width': windowWidth
                        });
                        // factor = 2;
                        factor = windowWidth / options.minwidth;
                        //alert(factor = windowWidth / options.minwidth)
                    },
                    landscape: function() {
                        bodyEl.css({
                            'width': windowHeight
                        });
                        // factor = 2;
                        factor = windowHeight / options.minwidth;
                        //alert(factor = windowWidth / options.minwidth)
                    }
                });

            } else if (windowWidth > options.maxwidth) {
                //alert('当屏幕宽度大于最大宽度时')
                if (!options.aligncenter) {
                    bodyEl.css({
                        'margin': '0 auto'
                    })
                }else{
                    bodyEl.css({
                        'margin': '0 auto',
                        'width': options.maxwidth
                    })
                }
                factor = 1
            } else {
                alert('abnormal')
            }
            htmlEl.css('font-size', options.fontsize * factor);
        }
    };

    //屏幕方向探测器
    function orientationSensor(callback) {
        var windowWidth = $(window).width(),
                windowHeight = $(window).height();
        if (typeof(callback) == 'undefined') {
            callback = {
                portrait: function() {},
                landscape: function() {}
            }
        } else {
            if (windowWidth < windowHeight) {
                return callback.portrait();
            } else {
                return callback.landscape();
            }
        }
    }

    var zoom = 0,
            windowWidth = $(window).width(),
            windowHeight = $(window).height(),
            originalWidth = 680,
            originalHeight = 964,
            portraitFactor = 0.7,
            landscapeFactor = 0.843;
    orientationSensor({
        portrait: function() {
            var zoom = windowHeight * (landscapeFactor / originalHeight);
            $('.tpl .page >div').css(sizeArguObj(zoom));
        },
        landscape: function() {
            var zoom = windowHeight * (landscapeFactor / originalHeight);
            $('.tpl .page >div').css(sizeArguObj(zoom));
        }
    });

    // 尺寸设定集
    function sizeArguObj(zoom) {
        return {
            '-ms-zoom': zoom,
            '-webkit-transform': 'scale(' + zoom + ')',
            '-webkit-transform-origin': 'left top',
            '-moz-transform': 'scale(' + zoom + ')',
            '-moz-transform-origin': 'left center'
        }
    }
</script>
</html>